"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_models_User_js";
exports.ids = ["_rsc_models_User_js"];
exports.modules = {

/***/ "(rsc)/./models/User.js":
/*!************************!*\
  !*** ./models/User.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _plugins_toJSON__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./plugins/toJSON */ \"(rsc)/./models/plugins/toJSON.js\");\n\n\n// USER SCHEMA\nconst userSchema = mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema({\n    name: {\n        type: String,\n        trim: true\n    },\n    email: {\n        type: String,\n        trim: true,\n        lowercase: true\n    },\n    image: {\n        type: String\n    },\n    // Used in the Stripe webhook to identify the user in Stripe and later create Customer Portal or prefill user credit card details\n    customerId: {\n        type: String,\n        validate (value) {\n            return value.includes(\"cus_\");\n        }\n    },\n    // Used in the Stripe webhook. should match a plan in config.js file.\n    priceId: {\n        type: String,\n        validate (value) {\n            return value.includes(\"price_\");\n        }\n    },\n    // Used to determine if the user has access to the productâ€”it's turn on/off by the Stripe webhook\n    hasAccess: {\n        type: Boolean,\n        default: false\n    },\n    // Add role field\n    role: {\n        type: String,\n        enum: [\n            \"user\",\n            \"admin\",\n            \"editor\",\n            \"moderator\"\n        ],\n        default: \"user\",\n        required: true\n    },\n    lastLogin: {\n        type: Date,\n        default: null\n    }\n}, {\n    timestamps: true,\n    toJSON: {\n        virtuals: true\n    }\n});\n// add plugin that converts mongoose to json\nuserSchema.plugin(_plugins_toJSON__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n// Optional: Add methods to check roles\nuserSchema.methods.hasRole = function(role) {\n    return this.role === role;\n};\nuserSchema.methods.isAdmin = function() {\n    return this.role === \"admin\";\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"User\", userSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvVXNlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWdDO0FBQ007QUFFdEMsY0FBYztBQUNkLE1BQU1FLGFBQWFGLHNEQUFlLENBQ2hDO0lBQ0VJLE1BQU07UUFDSkMsTUFBTUM7UUFDTkMsTUFBTTtJQUNSO0lBQ0FDLE9BQU87UUFDTEgsTUFBTUM7UUFDTkMsTUFBTTtRQUNORSxXQUFXO0lBQ2I7SUFDQUMsT0FBTztRQUNMTCxNQUFNQztJQUNSO0lBQ0EsaUlBQWlJO0lBQ2pJSyxZQUFZO1FBQ1ZOLE1BQU1DO1FBQ05NLFVBQVNDLEtBQUs7WUFDWixPQUFPQSxNQUFNQyxRQUFRLENBQUM7UUFDeEI7SUFDRjtJQUNBLHFFQUFxRTtJQUNyRUMsU0FBUztRQUNQVixNQUFNQztRQUNOTSxVQUFTQyxLQUFLO1lBQ1osT0FBT0EsTUFBTUMsUUFBUSxDQUFDO1FBQ3hCO0lBQ0Y7SUFDQSxpR0FBaUc7SUFDakdFLFdBQVc7UUFDVFgsTUFBTVk7UUFDTkMsU0FBUztJQUNYO0lBQ0EsaUJBQWlCO0lBQ2pCQyxNQUFNO1FBQ0pkLE1BQU1DO1FBQ05jLE1BQU07WUFBQztZQUFRO1lBQVM7WUFBVTtTQUFZO1FBQzlDRixTQUFTO1FBQ1RHLFVBQVU7SUFDWjtJQUNBQyxXQUFXO1FBQ1RqQixNQUFNa0I7UUFDTkwsU0FBUztJQUNYO0FBQ0YsR0FDQTtJQUNFTSxZQUFZO0lBQ1p2QixRQUFRO1FBQUV3QixVQUFVO0lBQUs7QUFDM0I7QUFHRiw0Q0FBNEM7QUFDNUN2QixXQUFXd0IsTUFBTSxDQUFDekIsdURBQU1BO0FBRXhCLHVDQUF1QztBQUN2Q0MsV0FBV3lCLE9BQU8sQ0FBQ0MsT0FBTyxHQUFHLFNBQVVULElBQUk7SUFDekMsT0FBTyxJQUFJLENBQUNBLElBQUksS0FBS0E7QUFDdkI7QUFFQWpCLFdBQVd5QixPQUFPLENBQUNFLE9BQU8sR0FBRztJQUMzQixPQUFPLElBQUksQ0FBQ1YsSUFBSSxLQUFLO0FBQ3ZCO0FBRUEsaUVBQWVuQix3REFBZSxDQUFDK0IsSUFBSSxJQUFJL0IscURBQWMsQ0FBQyxRQUFRRSxXQUFXQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvdXN1YXJpby9Eb2N1bWVudHMvR2l0SHViL2hhY2tuaWdodC9tb2RlbHMvVXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5pbXBvcnQgdG9KU09OIGZyb20gXCIuL3BsdWdpbnMvdG9KU09OXCI7XG5cbi8vIFVTRVIgU0NIRU1BXG5jb25zdCB1c2VyU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgbmFtZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgdHJpbTogdHJ1ZSxcbiAgICB9LFxuICAgIGVtYWlsOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICB0cmltOiB0cnVlLFxuICAgICAgbG93ZXJjYXNlOiB0cnVlLFxuICAgIH0sXG4gICAgaW1hZ2U6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICB9LFxuICAgIC8vIFVzZWQgaW4gdGhlIFN0cmlwZSB3ZWJob29rIHRvIGlkZW50aWZ5IHRoZSB1c2VyIGluIFN0cmlwZSBhbmQgbGF0ZXIgY3JlYXRlIEN1c3RvbWVyIFBvcnRhbCBvciBwcmVmaWxsIHVzZXIgY3JlZGl0IGNhcmQgZGV0YWlsc1xuICAgIGN1c3RvbWVySWQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5pbmNsdWRlcyhcImN1c19cIik7XG4gICAgICB9LFxuICAgIH0sXG4gICAgLy8gVXNlZCBpbiB0aGUgU3RyaXBlIHdlYmhvb2suIHNob3VsZCBtYXRjaCBhIHBsYW4gaW4gY29uZmlnLmpzIGZpbGUuXG4gICAgcHJpY2VJZDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLmluY2x1ZGVzKFwicHJpY2VfXCIpO1xuICAgICAgfSxcbiAgICB9LFxuICAgIC8vIFVzZWQgdG8gZGV0ZXJtaW5lIGlmIHRoZSB1c2VyIGhhcyBhY2Nlc3MgdG8gdGhlIHByb2R1Y3TigJRpdCdzIHR1cm4gb24vb2ZmIGJ5IHRoZSBTdHJpcGUgd2ViaG9va1xuICAgIGhhc0FjY2Vzczoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIH0sXG4gICAgLy8gQWRkIHJvbGUgZmllbGRcbiAgICByb2xlOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBlbnVtOiBbXCJ1c2VyXCIsIFwiYWRtaW5cIiwgXCJlZGl0b3JcIiwgXCJtb2RlcmF0b3JcIl0sIC8vIERlZmluZSBhbGxvd2VkIHJvbGVzXG4gICAgICBkZWZhdWx0OiBcInVzZXJcIiwgLy8gU2V0IGRlZmF1bHQgcm9sZVxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgICBsYXN0TG9naW46IHtcbiAgICAgIHR5cGU6IERhdGUsXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0aW1lc3RhbXBzOiB0cnVlLFxuICAgIHRvSlNPTjogeyB2aXJ0dWFsczogdHJ1ZSB9LFxuICB9XG4pO1xuXG4vLyBhZGQgcGx1Z2luIHRoYXQgY29udmVydHMgbW9uZ29vc2UgdG8ganNvblxudXNlclNjaGVtYS5wbHVnaW4odG9KU09OKTtcblxuLy8gT3B0aW9uYWw6IEFkZCBtZXRob2RzIHRvIGNoZWNrIHJvbGVzXG51c2VyU2NoZW1hLm1ldGhvZHMuaGFzUm9sZSA9IGZ1bmN0aW9uIChyb2xlKSB7XG4gIHJldHVybiB0aGlzLnJvbGUgPT09IHJvbGU7XG59O1xuXG51c2VyU2NoZW1hLm1ldGhvZHMuaXNBZG1pbiA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMucm9sZSA9PT0gXCJhZG1pblwiO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWxzLlVzZXIgfHwgbW9uZ29vc2UubW9kZWwoXCJVc2VyXCIsIHVzZXJTY2hlbWEpO1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwidG9KU09OIiwidXNlclNjaGVtYSIsIlNjaGVtYSIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwidHJpbSIsImVtYWlsIiwibG93ZXJjYXNlIiwiaW1hZ2UiLCJjdXN0b21lcklkIiwidmFsaWRhdGUiLCJ2YWx1ZSIsImluY2x1ZGVzIiwicHJpY2VJZCIsImhhc0FjY2VzcyIsIkJvb2xlYW4iLCJkZWZhdWx0Iiwicm9sZSIsImVudW0iLCJyZXF1aXJlZCIsImxhc3RMb2dpbiIsIkRhdGUiLCJ0aW1lc3RhbXBzIiwidmlydHVhbHMiLCJwbHVnaW4iLCJtZXRob2RzIiwiaGFzUm9sZSIsImlzQWRtaW4iLCJtb2RlbHMiLCJVc2VyIiwibW9kZWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./models/User.js\n");

/***/ }),

/***/ "(rsc)/./models/plugins/toJSON.js":
/*!**********************************!*\
  !*** ./models/plugins/toJSON.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* eslint-disable no-param-reassign */ /**\n * A mongoose schema plugin which applies the following in the toJSON transform call:\n *  - removes __v, createdAt, updatedAt, and any path that has private: true\n *  - replaces _id with id\n */ const deleteAtPath = (obj, path, index)=>{\n    if (index === path.length - 1) {\n        delete obj[path[index]];\n        return;\n    }\n    deleteAtPath(obj[path[index]], path, index + 1);\n};\nconst toJSON = (schema)=>{\n    let transform;\n    if (schema.options.toJSON && schema.options.toJSON.transform) {\n        transform = schema.options.toJSON.transform;\n    }\n    schema.options.toJSON = Object.assign(schema.options.toJSON || {}, {\n        transform (doc, ret, options) {\n            Object.keys(schema.paths).forEach((path)=>{\n                if (schema.paths[path].options && schema.paths[path].options.private) {\n                    deleteAtPath(ret, path.split(\".\"), 0);\n                }\n            });\n            if (ret._id) {\n                ret.id = ret._id.toString();\n            }\n            delete ret._id;\n            delete ret.__v;\n            if (transform) {\n                return transform(doc, ret, options);\n            }\n        }\n    });\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (toJSON);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvcGx1Z2lucy90b0pTT04uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLG9DQUFvQyxHQUVwQzs7OztDQUlDLEdBRUQsTUFBTUEsZUFBZSxDQUFDQyxLQUFLQyxNQUFNQztJQUMvQixJQUFJQSxVQUFVRCxLQUFLRSxNQUFNLEdBQUcsR0FBRztRQUM3QixPQUFPSCxHQUFHLENBQUNDLElBQUksQ0FBQ0MsTUFBTSxDQUFDO1FBQ3ZCO0lBQ0Y7SUFDQUgsYUFBYUMsR0FBRyxDQUFDQyxJQUFJLENBQUNDLE1BQU0sQ0FBQyxFQUFFRCxNQUFNQyxRQUFRO0FBQy9DO0FBRUEsTUFBTUUsU0FBUyxDQUFDQztJQUNkLElBQUlDO0lBRUosSUFBSUQsT0FBT0UsT0FBTyxDQUFDSCxNQUFNLElBQUlDLE9BQU9FLE9BQU8sQ0FBQ0gsTUFBTSxDQUFDRSxTQUFTLEVBQUU7UUFDNURBLFlBQVlELE9BQU9FLE9BQU8sQ0FBQ0gsTUFBTSxDQUFDRSxTQUFTO0lBQzdDO0lBRUFELE9BQU9FLE9BQU8sQ0FBQ0gsTUFBTSxHQUFHSSxPQUFPQyxNQUFNLENBQUNKLE9BQU9FLE9BQU8sQ0FBQ0gsTUFBTSxJQUFJLENBQUMsR0FBRztRQUNqRUUsV0FBVUksR0FBRyxFQUFFQyxHQUFHLEVBQUVKLE9BQU87WUFDekJDLE9BQU9JLElBQUksQ0FBQ1AsT0FBT1EsS0FBSyxFQUFFQyxPQUFPLENBQUMsQ0FBQ2I7Z0JBQ2pDLElBQUlJLE9BQU9RLEtBQUssQ0FBQ1osS0FBSyxDQUFDTSxPQUFPLElBQUlGLE9BQU9RLEtBQUssQ0FBQ1osS0FBSyxDQUFDTSxPQUFPLENBQUNRLE9BQU8sRUFBRTtvQkFDcEVoQixhQUFhWSxLQUFLVixLQUFLZSxLQUFLLENBQUMsTUFBTTtnQkFDckM7WUFDRjtZQUVBLElBQUlMLElBQUlNLEdBQUcsRUFBRTtnQkFDWE4sSUFBSU8sRUFBRSxHQUFHUCxJQUFJTSxHQUFHLENBQUNFLFFBQVE7WUFDM0I7WUFDQSxPQUFPUixJQUFJTSxHQUFHO1lBQ2QsT0FBT04sSUFBSVMsR0FBRztZQUVkLElBQUlkLFdBQVc7Z0JBQ2IsT0FBT0EsVUFBVUksS0FBS0MsS0FBS0o7WUFDN0I7UUFDRjtJQUNGO0FBQ0Y7QUFFQSxpRUFBZUgsTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3VzdWFyaW8vRG9jdW1lbnRzL0dpdEh1Yi9oYWNrbmlnaHQvbW9kZWxzL3BsdWdpbnMvdG9KU09OLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5cbi8qKlxuICogQSBtb25nb29zZSBzY2hlbWEgcGx1Z2luIHdoaWNoIGFwcGxpZXMgdGhlIGZvbGxvd2luZyBpbiB0aGUgdG9KU09OIHRyYW5zZm9ybSBjYWxsOlxuICogIC0gcmVtb3ZlcyBfX3YsIGNyZWF0ZWRBdCwgdXBkYXRlZEF0LCBhbmQgYW55IHBhdGggdGhhdCBoYXMgcHJpdmF0ZTogdHJ1ZVxuICogIC0gcmVwbGFjZXMgX2lkIHdpdGggaWRcbiAqL1xuXG5jb25zdCBkZWxldGVBdFBhdGggPSAob2JqLCBwYXRoLCBpbmRleCkgPT4ge1xuICBpZiAoaW5kZXggPT09IHBhdGgubGVuZ3RoIC0gMSkge1xuICAgIGRlbGV0ZSBvYmpbcGF0aFtpbmRleF1dO1xuICAgIHJldHVybjtcbiAgfVxuICBkZWxldGVBdFBhdGgob2JqW3BhdGhbaW5kZXhdXSwgcGF0aCwgaW5kZXggKyAxKTtcbn07XG5cbmNvbnN0IHRvSlNPTiA9IChzY2hlbWEpID0+IHtcbiAgbGV0IHRyYW5zZm9ybTtcblxuICBpZiAoc2NoZW1hLm9wdGlvbnMudG9KU09OICYmIHNjaGVtYS5vcHRpb25zLnRvSlNPTi50cmFuc2Zvcm0pIHtcbiAgICB0cmFuc2Zvcm0gPSBzY2hlbWEub3B0aW9ucy50b0pTT04udHJhbnNmb3JtO1xuICB9XG5cbiAgc2NoZW1hLm9wdGlvbnMudG9KU09OID0gT2JqZWN0LmFzc2lnbihzY2hlbWEub3B0aW9ucy50b0pTT04gfHwge30sIHtcbiAgICB0cmFuc2Zvcm0oZG9jLCByZXQsIG9wdGlvbnMpIHtcbiAgICAgIE9iamVjdC5rZXlzKHNjaGVtYS5wYXRocykuZm9yRWFjaCgocGF0aCkgPT4ge1xuICAgICAgICBpZiAoc2NoZW1hLnBhdGhzW3BhdGhdLm9wdGlvbnMgJiYgc2NoZW1hLnBhdGhzW3BhdGhdLm9wdGlvbnMucHJpdmF0ZSkge1xuICAgICAgICAgIGRlbGV0ZUF0UGF0aChyZXQsIHBhdGguc3BsaXQoXCIuXCIpLCAwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXQuX2lkKSB7XG4gICAgICAgIHJldC5pZCA9IHJldC5faWQudG9TdHJpbmcoKTtcbiAgICAgIH1cbiAgICAgIGRlbGV0ZSByZXQuX2lkO1xuICAgICAgZGVsZXRlIHJldC5fX3Y7XG5cbiAgICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybShkb2MsIHJldCwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfSxcbiAgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b0pTT047XG4iXSwibmFtZXMiOlsiZGVsZXRlQXRQYXRoIiwib2JqIiwicGF0aCIsImluZGV4IiwibGVuZ3RoIiwidG9KU09OIiwic2NoZW1hIiwidHJhbnNmb3JtIiwib3B0aW9ucyIsIk9iamVjdCIsImFzc2lnbiIsImRvYyIsInJldCIsImtleXMiLCJwYXRocyIsImZvckVhY2giLCJwcml2YXRlIiwic3BsaXQiLCJfaWQiLCJpZCIsInRvU3RyaW5nIiwiX192Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./models/plugins/toJSON.js\n");

/***/ })

};
;