"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_models_User_js";
exports.ids = ["_rsc_models_User_js"];
exports.modules = {

/***/ "(rsc)/./models/User.js":
/*!************************!*\
  !*** ./models/User.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _plugins_toJSON__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./plugins/toJSON */ \"(rsc)/./models/plugins/toJSON.js\");\n\n\n// USER SCHEMA\nconst userSchema = mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema({\n    name: {\n        type: String,\n        trim: true\n    },\n    email: {\n        type: String,\n        trim: true,\n        lowercase: true\n    },\n    image: {\n        type: String\n    },\n    // Used in the Stripe webhook to identify the user in Stripe and later create Customer Portal or prefill user credit card details\n    customerId: {\n        type: String,\n        validate (value) {\n            return value.includes(\"cus_\");\n        }\n    },\n    // Used in the Stripe webhook. should match a plan in config.js file.\n    priceId: {\n        type: String,\n        validate (value) {\n            return value.includes(\"price_\");\n        }\n    },\n    // Used to determine if the user has access to the productâ€”it's turn on/off by the Stripe webhook\n    hasAccess: {\n        type: Boolean,\n        default: false\n    },\n    // Add role field\n    role: {\n        type: String,\n        enum: [\n            \"user\",\n            \"admin\",\n            \"editor\",\n            \"moderator\"\n        ],\n        default: \"user\",\n        required: true\n    },\n    lastLogin: {\n        type: Date,\n        default: null\n    }\n}, {\n    timestamps: true,\n    toJSON: {\n        virtuals: true\n    }\n});\n// add plugin that converts mongoose to json\nuserSchema.plugin(_plugins_toJSON__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n// Optional: Add methods to check roles\nuserSchema.methods.hasRole = function(role) {\n    return this.role === role;\n};\nuserSchema.methods.isAdmin = function() {\n    return this.role === \"admin\";\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"User\", userSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvVXNlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWdDO0FBQ007QUFFdEMsY0FBYztBQUNkLE1BQU1FLGFBQWFGLHNEQUFlLENBQ2hDO0lBQ0VJLE1BQU07UUFDSkMsTUFBTUM7UUFDTkMsTUFBTTtJQUNSO0lBQ0FDLE9BQU87UUFDTEgsTUFBTUM7UUFDTkMsTUFBTTtRQUNORSxXQUFXO0lBQ2I7SUFDQUMsT0FBTztRQUNMTCxNQUFNQztJQUNSO0lBQ0EsaUlBQWlJO0lBQ2pJSyxZQUFZO1FBQ1ZOLE1BQU1DO1FBQ05NLFVBQVNDLEtBQUs7WUFDWixPQUFPQSxNQUFNQyxRQUFRLENBQUM7UUFDeEI7SUFDRjtJQUNBLHFFQUFxRTtJQUNyRUMsU0FBUztRQUNQVixNQUFNQztRQUNOTSxVQUFTQyxLQUFLO1lBQ1osT0FBT0EsTUFBTUMsUUFBUSxDQUFDO1FBQ3hCO0lBQ0Y7SUFDQSxpR0FBaUc7SUFDakdFLFdBQVc7UUFDVFgsTUFBTVk7UUFDTkMsU0FBUztJQUNYO0lBQ0EsaUJBQWlCO0lBQ2pCQyxNQUFNO1FBQ0pkLE1BQU1DO1FBQ05jLE1BQU07WUFBQztZQUFRO1lBQVM7WUFBVTtTQUFZO1FBQzlDRixTQUFTO1FBQ1RHLFVBQVU7SUFDWjtJQUNBQyxXQUFXO1FBQ1RqQixNQUFNa0I7UUFDTkwsU0FBUztJQUNYO0FBQ0YsR0FDQTtJQUNFTSxZQUFZO0lBQ1p2QixRQUFRO1FBQUV3QixVQUFVO0lBQUs7QUFDM0I7QUFHRiw0Q0FBNEM7QUFDNUN2QixXQUFXd0IsTUFBTSxDQUFDekIsdURBQU1BO0FBRXhCLHVDQUF1QztBQUN2Q0MsV0FBV3lCLE9BQU8sQ0FBQ0MsT0FBTyxHQUFHLFNBQVVULElBQUk7SUFDekMsT0FBTyxJQUFJLENBQUNBLElBQUksS0FBS0E7QUFDdkI7QUFFQWpCLFdBQVd5QixPQUFPLENBQUNFLE9BQU8sR0FBRztJQUMzQixPQUFPLElBQUksQ0FBQ1YsSUFBSSxLQUFLO0FBQ3ZCO0FBRUEsaUVBQWVuQix3REFBZSxDQUFDK0IsSUFBSSxJQUFJL0IscURBQWMsQ0FBQyxRQUFRRSxXQUFXQSxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXERhbmllbFxcRGVza3RvcFxcUG9ydGFmb2xpb1xcaGFja25pZ2h0XFxtb2RlbHNcXFVzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5pbXBvcnQgdG9KU09OIGZyb20gXCIuL3BsdWdpbnMvdG9KU09OXCI7XHJcblxyXG4vLyBVU0VSIFNDSEVNQVxyXG5jb25zdCB1c2VyU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hKFxyXG4gIHtcclxuICAgIG5hbWU6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICB0cmltOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIGVtYWlsOiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgdHJpbTogdHJ1ZSxcclxuICAgICAgbG93ZXJjYXNlOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIGltYWdlOiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgIH0sXHJcbiAgICAvLyBVc2VkIGluIHRoZSBTdHJpcGUgd2ViaG9vayB0byBpZGVudGlmeSB0aGUgdXNlciBpbiBTdHJpcGUgYW5kIGxhdGVyIGNyZWF0ZSBDdXN0b21lciBQb3J0YWwgb3IgcHJlZmlsbCB1c2VyIGNyZWRpdCBjYXJkIGRldGFpbHNcclxuICAgIGN1c3RvbWVySWQ6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICB2YWxpZGF0ZSh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZS5pbmNsdWRlcyhcImN1c19cIik7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgLy8gVXNlZCBpbiB0aGUgU3RyaXBlIHdlYmhvb2suIHNob3VsZCBtYXRjaCBhIHBsYW4gaW4gY29uZmlnLmpzIGZpbGUuXHJcbiAgICBwcmljZUlkOiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgdmFsaWRhdGUodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWUuaW5jbHVkZXMoXCJwcmljZV9cIik7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgLy8gVXNlZCB0byBkZXRlcm1pbmUgaWYgdGhlIHVzZXIgaGFzIGFjY2VzcyB0byB0aGUgcHJvZHVjdOKAlGl0J3MgdHVybiBvbi9vZmYgYnkgdGhlIFN0cmlwZSB3ZWJob29rXHJcbiAgICBoYXNBY2Nlc3M6IHtcclxuICAgICAgdHlwZTogQm9vbGVhbixcclxuICAgICAgZGVmYXVsdDogZmFsc2UsXHJcbiAgICB9LFxyXG4gICAgLy8gQWRkIHJvbGUgZmllbGRcclxuICAgIHJvbGU6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICBlbnVtOiBbXCJ1c2VyXCIsIFwiYWRtaW5cIiwgXCJlZGl0b3JcIiwgXCJtb2RlcmF0b3JcIl0sIC8vIERlZmluZSBhbGxvd2VkIHJvbGVzXHJcbiAgICAgIGRlZmF1bHQ6IFwidXNlclwiLCAvLyBTZXQgZGVmYXVsdCByb2xlXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIGxhc3RMb2dpbjoge1xyXG4gICAgICB0eXBlOiBEYXRlLFxyXG4gICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgfSxcclxuICB9LFxyXG4gIHtcclxuICAgIHRpbWVzdGFtcHM6IHRydWUsXHJcbiAgICB0b0pTT046IHsgdmlydHVhbHM6IHRydWUgfSxcclxuICB9XHJcbik7XHJcblxyXG4vLyBhZGQgcGx1Z2luIHRoYXQgY29udmVydHMgbW9uZ29vc2UgdG8ganNvblxyXG51c2VyU2NoZW1hLnBsdWdpbih0b0pTT04pO1xyXG5cclxuLy8gT3B0aW9uYWw6IEFkZCBtZXRob2RzIHRvIGNoZWNrIHJvbGVzXHJcbnVzZXJTY2hlbWEubWV0aG9kcy5oYXNSb2xlID0gZnVuY3Rpb24gKHJvbGUpIHtcclxuICByZXR1cm4gdGhpcy5yb2xlID09PSByb2xlO1xyXG59O1xyXG5cclxudXNlclNjaGVtYS5tZXRob2RzLmlzQWRtaW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMucm9sZSA9PT0gXCJhZG1pblwiO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWxzLlVzZXIgfHwgbW9uZ29vc2UubW9kZWwoXCJVc2VyXCIsIHVzZXJTY2hlbWEpO1xyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJ0b0pTT04iLCJ1c2VyU2NoZW1hIiwiU2NoZW1hIiwibmFtZSIsInR5cGUiLCJTdHJpbmciLCJ0cmltIiwiZW1haWwiLCJsb3dlcmNhc2UiLCJpbWFnZSIsImN1c3RvbWVySWQiLCJ2YWxpZGF0ZSIsInZhbHVlIiwiaW5jbHVkZXMiLCJwcmljZUlkIiwiaGFzQWNjZXNzIiwiQm9vbGVhbiIsImRlZmF1bHQiLCJyb2xlIiwiZW51bSIsInJlcXVpcmVkIiwibGFzdExvZ2luIiwiRGF0ZSIsInRpbWVzdGFtcHMiLCJ2aXJ0dWFscyIsInBsdWdpbiIsIm1ldGhvZHMiLCJoYXNSb2xlIiwiaXNBZG1pbiIsIm1vZGVscyIsIlVzZXIiLCJtb2RlbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./models/User.js\n");

/***/ }),

/***/ "(rsc)/./models/plugins/toJSON.js":
/*!**********************************!*\
  !*** ./models/plugins/toJSON.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* eslint-disable no-param-reassign */ /**\r\n * A mongoose schema plugin which applies the following in the toJSON transform call:\r\n *  - removes __v, createdAt, updatedAt, and any path that has private: true\r\n *  - replaces _id with id\r\n */ const deleteAtPath = (obj, path, index)=>{\n    if (index === path.length - 1) {\n        delete obj[path[index]];\n        return;\n    }\n    deleteAtPath(obj[path[index]], path, index + 1);\n};\nconst toJSON = (schema)=>{\n    let transform;\n    if (schema.options.toJSON && schema.options.toJSON.transform) {\n        transform = schema.options.toJSON.transform;\n    }\n    schema.options.toJSON = Object.assign(schema.options.toJSON || {}, {\n        transform (doc, ret, options) {\n            Object.keys(schema.paths).forEach((path)=>{\n                if (schema.paths[path].options && schema.paths[path].options.private) {\n                    deleteAtPath(ret, path.split(\".\"), 0);\n                }\n            });\n            if (ret._id) {\n                ret.id = ret._id.toString();\n            }\n            delete ret._id;\n            delete ret.__v;\n            if (transform) {\n                return transform(doc, ret, options);\n            }\n        }\n    });\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (toJSON);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvcGx1Z2lucy90b0pTT04uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLG9DQUFvQyxHQUVwQzs7OztDQUlDLEdBRUQsTUFBTUEsZUFBZSxDQUFDQyxLQUFLQyxNQUFNQztJQUMvQixJQUFJQSxVQUFVRCxLQUFLRSxNQUFNLEdBQUcsR0FBRztRQUM3QixPQUFPSCxHQUFHLENBQUNDLElBQUksQ0FBQ0MsTUFBTSxDQUFDO1FBQ3ZCO0lBQ0Y7SUFDQUgsYUFBYUMsR0FBRyxDQUFDQyxJQUFJLENBQUNDLE1BQU0sQ0FBQyxFQUFFRCxNQUFNQyxRQUFRO0FBQy9DO0FBRUEsTUFBTUUsU0FBUyxDQUFDQztJQUNkLElBQUlDO0lBRUosSUFBSUQsT0FBT0UsT0FBTyxDQUFDSCxNQUFNLElBQUlDLE9BQU9FLE9BQU8sQ0FBQ0gsTUFBTSxDQUFDRSxTQUFTLEVBQUU7UUFDNURBLFlBQVlELE9BQU9FLE9BQU8sQ0FBQ0gsTUFBTSxDQUFDRSxTQUFTO0lBQzdDO0lBRUFELE9BQU9FLE9BQU8sQ0FBQ0gsTUFBTSxHQUFHSSxPQUFPQyxNQUFNLENBQUNKLE9BQU9FLE9BQU8sQ0FBQ0gsTUFBTSxJQUFJLENBQUMsR0FBRztRQUNqRUUsV0FBVUksR0FBRyxFQUFFQyxHQUFHLEVBQUVKLE9BQU87WUFDekJDLE9BQU9JLElBQUksQ0FBQ1AsT0FBT1EsS0FBSyxFQUFFQyxPQUFPLENBQUMsQ0FBQ2I7Z0JBQ2pDLElBQUlJLE9BQU9RLEtBQUssQ0FBQ1osS0FBSyxDQUFDTSxPQUFPLElBQUlGLE9BQU9RLEtBQUssQ0FBQ1osS0FBSyxDQUFDTSxPQUFPLENBQUNRLE9BQU8sRUFBRTtvQkFDcEVoQixhQUFhWSxLQUFLVixLQUFLZSxLQUFLLENBQUMsTUFBTTtnQkFDckM7WUFDRjtZQUVBLElBQUlMLElBQUlNLEdBQUcsRUFBRTtnQkFDWE4sSUFBSU8sRUFBRSxHQUFHUCxJQUFJTSxHQUFHLENBQUNFLFFBQVE7WUFDM0I7WUFDQSxPQUFPUixJQUFJTSxHQUFHO1lBQ2QsT0FBT04sSUFBSVMsR0FBRztZQUVkLElBQUlkLFdBQVc7Z0JBQ2IsT0FBT0EsVUFBVUksS0FBS0MsS0FBS0o7WUFDN0I7UUFDRjtJQUNGO0FBQ0Y7QUFFQSxpRUFBZUgsTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxEYW5pZWxcXERlc2t0b3BcXFBvcnRhZm9saW9cXGhhY2tuaWdodFxcbW9kZWxzXFxwbHVnaW5zXFx0b0pTT04uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cclxuXHJcbi8qKlxyXG4gKiBBIG1vbmdvb3NlIHNjaGVtYSBwbHVnaW4gd2hpY2ggYXBwbGllcyB0aGUgZm9sbG93aW5nIGluIHRoZSB0b0pTT04gdHJhbnNmb3JtIGNhbGw6XHJcbiAqICAtIHJlbW92ZXMgX192LCBjcmVhdGVkQXQsIHVwZGF0ZWRBdCwgYW5kIGFueSBwYXRoIHRoYXQgaGFzIHByaXZhdGU6IHRydWVcclxuICogIC0gcmVwbGFjZXMgX2lkIHdpdGggaWRcclxuICovXHJcblxyXG5jb25zdCBkZWxldGVBdFBhdGggPSAob2JqLCBwYXRoLCBpbmRleCkgPT4ge1xyXG4gIGlmIChpbmRleCA9PT0gcGF0aC5sZW5ndGggLSAxKSB7XHJcbiAgICBkZWxldGUgb2JqW3BhdGhbaW5kZXhdXTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgZGVsZXRlQXRQYXRoKG9ialtwYXRoW2luZGV4XV0sIHBhdGgsIGluZGV4ICsgMSk7XHJcbn07XHJcblxyXG5jb25zdCB0b0pTT04gPSAoc2NoZW1hKSA9PiB7XHJcbiAgbGV0IHRyYW5zZm9ybTtcclxuXHJcbiAgaWYgKHNjaGVtYS5vcHRpb25zLnRvSlNPTiAmJiBzY2hlbWEub3B0aW9ucy50b0pTT04udHJhbnNmb3JtKSB7XHJcbiAgICB0cmFuc2Zvcm0gPSBzY2hlbWEub3B0aW9ucy50b0pTT04udHJhbnNmb3JtO1xyXG4gIH1cclxuXHJcbiAgc2NoZW1hLm9wdGlvbnMudG9KU09OID0gT2JqZWN0LmFzc2lnbihzY2hlbWEub3B0aW9ucy50b0pTT04gfHwge30sIHtcclxuICAgIHRyYW5zZm9ybShkb2MsIHJldCwgb3B0aW9ucykge1xyXG4gICAgICBPYmplY3Qua2V5cyhzY2hlbWEucGF0aHMpLmZvckVhY2goKHBhdGgpID0+IHtcclxuICAgICAgICBpZiAoc2NoZW1hLnBhdGhzW3BhdGhdLm9wdGlvbnMgJiYgc2NoZW1hLnBhdGhzW3BhdGhdLm9wdGlvbnMucHJpdmF0ZSkge1xyXG4gICAgICAgICAgZGVsZXRlQXRQYXRoKHJldCwgcGF0aC5zcGxpdChcIi5cIiksIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAocmV0Ll9pZCkge1xyXG4gICAgICAgIHJldC5pZCA9IHJldC5faWQudG9TdHJpbmcoKTtcclxuICAgICAgfVxyXG4gICAgICBkZWxldGUgcmV0Ll9pZDtcclxuICAgICAgZGVsZXRlIHJldC5fX3Y7XHJcblxyXG4gICAgICBpZiAodHJhbnNmb3JtKSB7XHJcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybShkb2MsIHJldCwgb3B0aW9ucyk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB0b0pTT047XHJcbiJdLCJuYW1lcyI6WyJkZWxldGVBdFBhdGgiLCJvYmoiLCJwYXRoIiwiaW5kZXgiLCJsZW5ndGgiLCJ0b0pTT04iLCJzY2hlbWEiLCJ0cmFuc2Zvcm0iLCJvcHRpb25zIiwiT2JqZWN0IiwiYXNzaWduIiwiZG9jIiwicmV0Iiwia2V5cyIsInBhdGhzIiwiZm9yRWFjaCIsInByaXZhdGUiLCJzcGxpdCIsIl9pZCIsImlkIiwidG9TdHJpbmciLCJfX3YiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./models/plugins/toJSON.js\n");

/***/ })

};
;